{
    "manifests": {
        "google/recaptcha": {
            "manifest": {
                "copy-from-recipe": {
                    "config/": "%CONFIG_DIR%/"
                },
                "env": {
                    "#1": "To use Google Recaptcha, you must register a site on Recaptcha's admin panel:",
                    "#2": "https://www.google.com/recaptcha/admin",
                    "GOOGLE_RECAPTCHA_SITE_KEY": "",
                    "GOOGLE_RECAPTCHA_SECRET": ""
                },
                "container": {
                    "google_recaptcha_site_key": "%env(GOOGLE_RECAPTCHA_SITE_KEY)%"
                },
                "post-install-output": [
                    "  * Register a site on https://www.google.com/recaptcha/admin",
                    "",
                    "  * Modify your GOOGLE_RECAPTCHA_SITE_KEY and GOOGLE_RECAPTCHA_SECRET config in <fg=green>.env</>",
                    "",
                    "  * Inject the <fg=green>ReCaptcha\\ReCaptcha</> service when you need to <fg=green>verify</> a submitted captcha"
                ]
            },
            "files": {
                "config/packages/google_recaptcha.php": {
                    "contents": [
                        "<?php",
                        "",
                        "declare(strict_types=1);",
                        "",
                        "use ReCaptcha\\RequestMethod\\Curl;",
                        "use ReCaptcha\\RequestMethod\\CurlPost;",
                        "use Symfony\\Component\\DependencyInjection\\Loader\\Configurator\\ContainerConfigurator;",
                        "use function Symfony\\Component\\DependencyInjection\\Loader\\Configurator\\service;",
                        "",
                        "return static function (ContainerConfigurator $containerConfigurator): void {",
                        "    $services = $containerConfigurator->services();",
                        "",
                        "    $services->set('ReCaptcha\\ReCaptcha')",
                        "        ->arg('$secret', '%env(GOOGLE_RECAPTCHA_SECRET)%')",
                        "        ->arg('$requestMethod', service('ReCaptcha\\RequestMethod'));",
                        "",
                        "    $services->alias('ReCaptcha\\RequestMethod', 'ReCaptcha\\RequestMethod\\CurlPost');",
                        "",
                        "    $services->set(CurlPost::class);",
                        "",
                        "    $services->set(Curl::class);",
                        "};",
                        ""
                    ],
                    "executable": false
                }
            },
            "ref": "657bf61195e78f38490518dc681481eedb09b75c"
        }
    }
}
